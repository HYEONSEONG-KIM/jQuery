<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel = "stylesheet" href = "../css/board.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src = "../js/board.js" type="text/javascript"></script>

<script type="text/javascript">
	currentPage = 1;
	$(function(){
		
		readServer(currentPage);
		
		// 글쓰기
		$('#write').on('click', function(){
			// 새로운 창 열기
			$('#wModal').modal('show');
		})
		// 글 입력 후 전송
		$('#send').on('click', function(){
			// 입력한 값 가져오기
			writeServer();
			// 새로운 창 닫기
			$('#wModal').modal('hide');
			$('.text').val("");
		})
		
		/* // 모달창 닫기 이벤트
		$('#wModal').on('hide.bs.modal', function(){
			
		}) */
		
		// 페이지 번호 클릭 이벤트 - 동적으로 생성된 요소
		$('#pageList').on('click','.paging', function(){
			currentPage = $(this).text().trim();
			readServer(currentPage);
		})
		
		// 이전 버튼 클릭 이벤트
		$('#pageList').on('click','.prev', function(){
			vprev = $('.pagination .paging').first().text().trim();
			currentPage = parseInt(vprev) - 1;
			readServer(currentPage);
		})
		
		// 다음 버튼 클릭 이벤트
		$('#pageList').on('click','.next', function(){
			vnext = $('.pagination .paging').last().text().trim();
			currentPage = parseInt(vnext) + 1;

			readServer(currentPage);
		})
		
		// 버튼 이벤트 - 수정,삭제,등록 -> 동적으로 생성된 요소
		$('#list').on('click', '.action', function(){
			// 해당 버튼 이름
			vname = $(this).attr('name');
			
			// 글번호
			vidx = $(this).attr('idx');
			
			
			if(vname == "reply"){
				// 내용 입력, 이름
				vname1 = String.fromCharCode(Math.random() * 26 + 65);
				vname2 = String.fromCharCode(Math.random() * 26 + 97);
				vname3 = parseInt(Math.random() * 100 + 1);
				
				// 입력한 내용
				vcont = $(this).prev().val();
				$(this).prev().val("");
				// 객체선언 - 동적으로 메서드나 필드추가 가능
				reply = {};
				
				// 객체에 필드 추가
				reply.bonum = vidx;
				reply.cont = vcont;
				reply.name = vname1 + vname2 +vname3;
				
				// 서버로 전송 - ajax() - js
				replyServer(this);
			
				
				
			}else if(vname == "delete"){
				
			}else if(vname == "modify"){
				
			}
		})
		
		/* //리스트의 제목을 클릭하면 - 내용과 같이 댓글내용도 출력
		$('.list').on('click', function(){
			alert($(this).attr('idx'));
		}) */
	})
</script>
</head>
<body>
<div class = "box" id = "box1">
		<h3>Accordion 게시글</h3>
		
		<div id = "dwr">
			<input type = "button" value = "글쓰기" id = "write">
		</div>
		
		<div id = "list"></div>
		<br>
		<div id = "pageList"></div>
	</div>
	
	<!-- Modal -->
	<div id="wModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	
	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Modal Header</h4>
	      </div>
	      <div class="modal-body">
		      <form>
		      	<label>이름</label>
		       	<input type = "text" class = "text" name = "writer"><br>
		       	
		       	<label>제목</label>
		       	<input type = "text" class = "text" name = "subject"><br>
		       	
		       	<label>메일</label>
		       	<input type = "text" class = "text" name = "mail"><br>
		       	
		       	<label>비밀번호</label>
	       		<input type = "text" class = "text" name = "password"><br>
		       	
		       	<label>내용</label><br>
		       	<textarea rows = "10" cols = "70" class = "text" name = "content"></textarea><br>
		       	<br>
		       	<input type = "button" class = "btn btn-success" value = "전송" id = "send">
		      </form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	
	  </div>
	</div>
</body>
</html>